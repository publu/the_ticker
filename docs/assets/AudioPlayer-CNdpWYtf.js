import{d as C,t as n,K as k,o as m,b as y,e as i,x as B,g as z}from"modules/vue-CHHLRvXz.js";import{u as E}from"slidev/context-BHJlDyX8.js";import{_ as P}from"index-DMrocUas.js";const R={class:"fixed bottom-0 left-0 right-0 z-50 bg-black/80 p-4"},S={key:0,class:"text-red-500 text-center"},q=C({__name:"AudioPlayer",setup(D){E();const t=n(null),r=n(!1),u=n(null),a=n(null),l=n(null),g=n(null),c=n(!1);k(()=>{t.value&&(t.value.addEventListener("error",e=>{console.error("Audio loading error:",e),c.value=!0}),t.value.addEventListener("loadeddata",()=>{_(),d(),t.value.play().catch(e=>{console.error("Autoplay failed:",e)}),r.value=!0}))});const _=()=>{try{u.value=new(window.AudioContext||window.webkitAudioContext),a.value=u.value.createAnalyser(),u.value.createMediaElementSource(t.value).connect(a.value),a.value.connect(u.value.destination),a.value.fftSize=256;const o=a.value.frequencyBinCount;l.value=new Uint8Array(o)}catch(e){console.error("Audio context setup error:",e)}},x=()=>{t.value&&(t.value.paused?(t.value.play().catch(e=>{console.error("Play failed:",e)}),r.value=!0):(t.value.pause(),r.value=!1))},d=()=>{if(!a.value||!l.value)return;g.value=requestAnimationFrame(d),a.value.getByteFrequencyData(l.value);const e=document.getElementById("visualizer");if(!e)return;const o=e.getContext("2d"),v=e.width,s=e.height,f=v/l.value.length;o.clearRect(0,0,v,s),l.value.forEach((w,p)=>{const h=w/255*s,A=p*f,b=p/l.value.length*360;o.fillStyle=`hsl(${b}, 100%, 50%)`,o.fillRect(A,s-h,f-1,h)})};return(e,o)=>(m(),y("div",R,[i("audio",{ref_key:"audioRef",ref:t,loop:"",crossorigin:"anonymous",src:"https://balajeet.mypinata.cloud/ipfs/QmQRDgLUBoM6zyjVmvnPoJuYGBiNzhCA5wMoTkjNyPDyqd"},null,512),i("button",{onClick:x,class:"absolute top-2 left-4 z-10 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-full shadow-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-300"},B(r.value?"⏸️":"▶️"),1),c.value?(m(),y("div",S," Audio failed to load. Please try refreshing the page. ")):z("v-if",!0),o[0]||(o[0]=i("canvas",{id:"visualizer",width:"1200",height:"100",class:"w-full h-20"},null,-1))]))}}),j=P(q,[["__scopeId","data-v-e6fc6c5a"]]);export{j as _};
